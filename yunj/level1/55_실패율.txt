import java.util.ArrayList;
import java.util.Comparator;
import java.util.Map;
import java.util.TreeMap;

class Solution {
    public int[] solution(int N, int[] stages) {
        int[] answer = new int[N];

        Map<Integer, Double> numOfChallenge = new TreeMap<>();
        for (int i = 1; i <= N + 1; i++) {
            numOfChallenge.put(i, 0.0);
        }
        for (int stage : stages) {
            numOfChallenge.put(stage, numOfChallenge.get(stage) + 1);
        }
        Map<Integer, Double> numOfFail = new TreeMap<>(numOfChallenge);
        ArrayList<Integer> chKey = new ArrayList<>(numOfChallenge.keySet());
        chKey.sort(Comparator.reverseOrder());
        ArrayList<Integer> faKey = new ArrayList<>(numOfFail.keySet());
        chKey.sort(Comparator.reverseOrder());

        int playerNum = 0;
        for (Integer a : chKey) {
            if (a == N + 1) {
                playerNum += numOfChallenge.get(a);
                continue;
            }
            playerNum += numOfChallenge.get(a);
            if (playerNum == 0)
                numOfFail.put(a, 0.0);
            else
                numOfFail.put(a, numOfChallenge.get(a) / playerNum);
        }

        for (int i : faKey) {
            System.out.printf("%d %f\n", i, numOfFail.get(i));
        }

        faKey.remove(N);

        faKey.sort(new Comparator<Integer>() {
            @Override
            public int compare(Integer o1, Integer o2) {
                return numOfFail.get(o2).compareTo(numOfFail.get(o1));
            }
        });
        for (int i = 0; i < N; i++) {
            answer[i] = faKey.get(i);
        }

        return answer;
    }
}